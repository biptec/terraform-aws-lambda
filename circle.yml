dependencies:
  override:
    # Install the gruntwork-module-circleci-helpers and use it to configure the build environment and run tests.
    - curl -Ls https://raw.githubusercontent.com/gruntwork-io/gruntwork-installer/master/bootstrap-gruntwork-installer.sh | bash /dev/stdin --version v0.0.16
    - gruntwork-install --module-name "gruntwork-module-circleci-helpers" --repo "https://github.com/gruntwork-io/module-ci" --tag "v0.3.16"
    - gruntwork-install --binary-name "docs-generator" --repo "https://github.com/gruntwork-io/module-ci" --tag "v0.3.16"
    - configure-environment-for-gruntwork-module --go-src-path test

  # Cache the folders where configure-environment-for-gruntwork-module installs binaries
  cache_directories:
    - ~/terraform
    - ~/packer
    - ~/glide

test:
  override:
    - run-go-tests --path test

# TODO: run the docs-generator?